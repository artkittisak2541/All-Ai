<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>จัดการข้อมูล AI - ST AI Router</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
:root {
    --primary: #8b5cf6;
    --primary-dark: #7c3aed;
    --secondary: #10b981;
    --dark-bg: #0f172a;
    --dark-card: #1e293b;
    --dark-border: #334155;
    --dark-text: #f1f5f9;
    --dark-text-secondary: #94a3b8;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Kanit', sans-serif;
}

body {
    background: var(--dark-bg);
    color: var(--dark-text);
    min-height: 100vh;
    padding: 20px;
}

.container {
    max-width: 1200px;
    margin: 0 auto;
}

.header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 30px;
    padding-bottom: 20px;
    border-bottom: 2px solid var(--primary);
}

.header h1 {
    font-size: 28px;
    background: linear-gradient(135deg, var(--primary), var(--secondary));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

.back-btn {
    background: linear-gradient(135deg, var(--primary), var(--primary-dark));
    color: white;
    padding: 10px 20px;
    border-radius: 8px;
    text-decoration: none;
    display: flex;
    align-items: center;
    gap: 8px;
    transition: transform 0.2s;
}

.back-btn:hover {
    transform: translateY(-2px);
}

.stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin-bottom: 30px;
}

.stat-card {
    background: var(--dark-card);
    padding: 20px;
    border-radius: 12px;
    border: 1px solid var(--dark-border);
}

.stat-card h3 {
    font-size: 14px;
    color: var(--dark-text-secondary);
    margin-bottom: 10px;
}

.stat-number {
    font-size: 32px;
    font-weight: 700;
    color: var(--primary);
}

.tabs {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
    flex-wrap: wrap;
}

.tab-btn {
    background: var(--dark-card);
    border: 1px solid var(--dark-border);
    color: var(--dark-text-secondary);
    padding: 10px 20px;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s;
}

.tab-btn.active {
    background: var(--primary);
    border-color: var(--primary);
    color: white;
}

.tab-btn:hover:not(.active) {
    border-color: var(--primary);
    color: var(--primary);
}

.tab-content {
    display: none;
}

.tab-content.active {
    display: block;
}

.category-list {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 20px;
    margin-bottom: 30px;
}

.category-card {
    background: var(--dark-card);
    border: 1px solid var(--dark-border);
    border-radius: 12px;
    padding: 20px;
    cursor: pointer;
    transition: all 0.2s;
}

.category-card:hover {
    transform: translateY(-5px);
    border-color: var(--primary);
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
}

.category-header {
    display: flex;
    align-items: center;
    gap: 15px;
    margin-bottom: 15px;
}

.category-icon {
    width: 50px;
    height: 50px;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    color: white;
}

.category-info h3 {
    font-size: 18px;
    margin-bottom: 5px;
}

.category-count {
    font-size: 14px;
    color: var(--dark-text-secondary);
}

.ai-list {
    max-height: 400px;
    overflow-y: auto;
    margin-top: 15px;
    padding-top: 15px;
    border-top: 1px solid var(--dark-border);
}

.ai-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px;
    border-radius: 8px;
    margin-bottom: 8px;
    background: rgba(255, 255, 255, 0.05);
}

.ai-item:hover {
    background: rgba(139, 92, 246, 0.1);
}

.ai-icon {
    width: 30px;
    height: 30px;
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
    color: white;
}

.ai-name {
    flex: 1;
    font-size: 14px;
}

.ai-provider {
    font-size: 12px;
    color: var(--dark-text-secondary);
}

.ai-badges {
    display: flex;
    gap: 4px;
}

.ai-badge {
    font-size: 10px;
    padding: 2px 6px;
    border-radius: 10px;
    background: rgba(255, 255, 255, 0.1);
}

.code-editor {
    background: var(--dark-card);
    border: 1px solid var(--dark-border);
    border-radius: 12px;
    padding: 20px;
    margin-bottom: 20px;
}

.editor-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
}

.editor-header h3 {
    font-size: 18px;
}

.editor-actions {
    display: flex;
    gap: 10px;
}

.editor-btn {
    padding: 8px 16px;
    border-radius: 6px;
    border: none;
    cursor: pointer;
    font-weight: 500;
}

.editor-btn.primary {
    background: linear-gradient(135deg, var(--primary), var(--primary-dark));
    color: white;
}

.editor-btn.secondary {
    background: transparent;
    border: 1px solid var(--dark-border);
    color: var(--dark-text-secondary);
}

#jsonEditor {
    width: 100%;
    height: 400px;
    background: #1a1a1a;
    color: #f8f8f2;
    border: 1px solid var(--dark-border);
    border-radius: 8px;
    padding: 15px;
    font-family: 'Courier New', monospace;
    font-size: 14px;
    line-height: 1.5;
    resize: vertical;
}

pre {
    background: #1a1a1a;
    padding: 20px;
    border-radius: 8px;
    overflow-x: auto;
    font-family: 'Courier New', monospace;
    font-size: 14px;
    line-height: 1.5;
}

.json-key {
    color: #f92672;
}

.json-string {
    color: #a6e22e;
}

.json-number {
    color: #ae81ff;
}

.json-boolean {
    color: #66d9ef;
}

.json-null {
    color: #f92672;
}

.instructions {
    background: var(--dark-card);
    border: 1px solid var(--dark-border);
    border-radius: 12px;
    padding: 20px;
    margin-top: 30px;
}

.instructions h3 {
    margin-bottom: 15px;
    color: var(--primary);
}

.instructions ul {
    padding-left: 20px;
    margin-bottom: 15px;
}

.instructions li {
    margin-bottom: 10px;
    line-height: 1.6;
}

.code-block {
    background: #1a1a1a;
    padding: 10px;
    border-radius: 6px;
    margin: 10px 0;
    font-family: 'Courier New', monospace;
    font-size: 13px;
    overflow-x: auto;
}

/* Responsive */
@media (max-width: 768px) {
    .category-list {
        grid-template-columns: 1fr;
    }
    
    .stats {
        grid-template-columns: 1fr;
    }
    
    .header {
        flex-direction: column;
        gap: 15px;
        align-items: flex-start;
    }
    
    .back-btn {
        align-self: stretch;
        text-align: center;
    }
}
</style>
</head>
<body>
<div class="container">
    <div class="header">
        <h1><i class="fas fa-robot"></i> จัดการข้อมูล AI ทั้งหมด</h1>
        <a href="index.html" class="back-btn">
            <i class="fas fa-arrow-left"></i> กลับไปหน้าหลัก
        </a>
    </div>
    
    <div class="stats">
        <div class="stat-card">
            <h3>หมวดหมู่ทั้งหมด</h3>
            <div class="stat-number" id="totalCategories">0</div>
        </div>
        <div class="stat-card">
            <h3>AI ทั้งหมด</h3>
            <div class="stat-number" id="totalAI">0</div>
        </div>
        <div class="stat-card">
            <h3>รองรับมือถือ</h3>
            <div class="stat-number" id="mobileAI">0</div>
        </div>
        <div class="stat-card">
            <h3>ฟรีใช้งาน</h3>
            <div class="stat-number" id="freeAI">0</div>
        </div>
    </div>
    
    <div class="tabs">
        <button class="tab-btn active" onclick="showTab('preview')">
            <i class="fas fa-eye"></i> ดูข้อมูล AI
        </button>
        <button class="tab-btn" onclick="showTab('json')">
            <i class="fas fa-code"></i> ข้อมูล JSON
        </button>
        <button class="tab-btn" onclick="showTab('edit')">
            <i class="fas fa-edit"></i> แก้ไขข้อมูล
        </button>
    </div>
    
    <div id="preview" class="tab-content active">
        <div class="category-list" id="categoryList">
            <!-- Categories will be loaded here -->
        </div>
    </div>
    
    <div id="json" class="tab-content">
        <div class="code-editor">
            <pre id="jsonView"><code>กำลังโหลดข้อมูล...</code></pre>
        </div>
    </div>
    
    <div id="edit" class="tab-content">
        <div class="code-editor">
            <div class="editor-header">
                <h3>แก้ไขข้อมูล AI ทั้งหมด</h3>
                <div class="editor-actions">
                    <button class="editor-btn secondary" onclick="loadAIData()">
                        <i class="fas fa-redo"></i> โหลดใหม่
                    </button>
                    <button class="editor-btn primary" onclick="saveAIData()">
                        <i class="fas fa-save"></i> บันทึกการเปลี่ยนแปลง
                    </button>
                </div>
            </div>
            <textarea id="jsonEditor" placeholder="วางข้อมูล JSON ของ AI ที่นี่..."></textarea>
        </div>
    </div>
    
    <div class="instructions">
        <h3><i class="fas fa-info-circle"></i> วิธีเพิ่ม/แก้ไข AI</h3>
        <ul>
            <li><strong>เพิ่ม AI ใหม่:</strong> คัดลอกรูปแบบข้อมูล AI จากตัวอย่างแล้วเพิ่มในอาร์เรย์ <code>ais</code> ของหมวดหมู่ที่ต้องการ</li>
            <li><strong>รูปแบบข้อมูล AI:</strong>
                <div class="code-block">
{
    id: 'unique-id',
    name: 'ชื่อ AI',
    provider: 'บริษัทผู้พัฒนา',
    icon: 'fas fa-icon-class',
    logoUrl: 'https://example.com/logo.png',
    colorClass: 'คลาสสี',
    description: 'คำอธิบายสั้นๆ',
    badges: [
        { text: 'ฟรี', type: 'free' },
        { text: 'มือถือ', type: 'mobile' }
    ],
    features: ['ฟีเจอร์1', 'ฟีเจอร์2', 'ฟีเจอร์3'],
    webUrl: 'https://example.com',
    mobileUrl: 'app://scheme',
    fallbackUrl: 'https://example.com'
}
                </div>
            </li>
            <li><strong>ประเภท Badge:</strong>
                <ul>
                    <li><code>free</code> - สีเขียว (ฟรี)</li>
                    <li><code>paid</code> - สีม่วง (จ่ายเงิน)</li>
                    <li><code>local</code> - สีแดง (ใช้งานออฟไลน์)</li>
                    <li><code>mobile</code> - สีน้ำเงิน (รองรับแอปมือถือ)</li>
                </ul>
            </li>
            <li><strong>บันทึกข้อมูล:</strong> หลังจากแก้ไขแล้วคลิกปุ่ม "บันทึกการเปลี่ยนแปลง" และรีเฟรชหน้า index.html</li>
        </ul>
    </div>
</div>

<script src="ai-data.js"></script>
<script>
let currentTab = 'preview';

function showTab(tabId) {
    // Hide all tabs
    document.querySelectorAll('.tab-content').forEach(tab => {
        tab.classList.remove('active');
    });
    
    // Remove active class from all buttons
    document.querySelectorAll('.tab-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    
    // Show selected tab
    document.getElementById(tabId).classList.add('active');
    
    // Add active class to clicked button
    event.currentTarget.classList.add('active');
    
    currentTab = tabId;
    
    // Load content based on tab
    if (tabId === 'preview') {
        renderCategoriesPreview();
    } else if (tabId === 'json') {
        renderJSONView();
    } else if (tabId === 'edit') {
        loadJSONEditor();
    }
}

function calculateStats() {
    let totalAI = 0;
    let mobileAI = 0;
    let freeAI = 0;
    
    aiCategories.forEach(category => {
        totalAI += category.ais.length;
        mobileAI += category.ais.filter(ai => ai.mobileUrl !== null).length;
        freeAI += category.ais.filter(ai => 
            ai.badges.some(badge => badge.text === 'ฟรี' || badge.type === 'free')
        ).length;
    });
    
    document.getElementById('totalCategories').textContent = aiCategories.length;
    document.getElementById('totalAI').textContent = totalAI;
    document.getElementById('mobileAI').textContent = mobileAI;
    document.getElementById('freeAI').textContent = freeAI;
}

function renderCategoriesPreview() {
    const container = document.getElementById('categoryList');
    if (!container) return;
    
    container.innerHTML = '';
    
    aiCategories.forEach(category => {
        const card = document.createElement('div');
        card.className = 'category-card';
        
        // Get category color
        let color = '#8b5cf6'; // default purple
        switch(category.colorClass) {
            case 'category-chat': color = '#3b82f6'; break;
            case 'category-slide': color = '#8b5cf6'; break;
            case 'category-code': color = '#10b981'; break;
            case 'category-email': color = '#ec4899'; break;
            case 'category-image': color = '#f59e0b'; break;
            case 'category-excel': color = '#06b6d4'; break;
            case 'category-meeting': color = '#6366f1'; break;
            case 'category-workflow': color = '#84cc16'; break;
            case 'category-article': color = '#ef4444'; break;
            case 'category-schedule': color = '#14b8a6'; break;
            case 'category-notes': color = '#8b5cf6'; break;
            case 'category-video': color = '#f97316'; break;
            case 'category-design': color = '#06b6d4'; break;
            case 'category-dataviz': color = '#ec4899'; break;
        }
        
        // Create AI items HTML
        let aiItemsHTML = '';
        category.ais.slice(0, 5).forEach(ai => {
            // Get badge color
            let badgeColor = '#6b7280';
            if (ai.badges && ai.badges.length > 0) {
                const firstBadge = ai.badges[0];
                switch(firstBadge.type) {
                    case 'free': badgeColor = '#10b981'; break;
                    case 'paid': badgeColor = '#8b5cf6'; break;
                    case 'local': badgeColor = '#ef4444'; break;
                    case 'mobile': badgeColor = '#3b82f6'; break;
                }
            }
            
            aiItemsHTML += `
                <div class="ai-item">
                    <div class="ai-icon" style="background: ${badgeColor};">
                        <i class="${ai.icon}"></i>
                    </div>
                    <div style="flex: 1;">
                        <div class="ai-name">${ai.name}</div>
                        <div class="ai-provider">${ai.provider}</div>
                    </div>
                    <div class="ai-badges">
                        ${ai.badges.map(badge => 
                            `<span class="ai-badge">${badge.text}</span>`
                        ).join('')}
                    </div>
                </div>
            `;
        });
        
        if (category.ais.length > 5) {
            aiItemsHTML += `
                <div class="ai-item" style="justify-content: center; color: var(--dark-text-secondary);">
                    <i class="fas fa-ellipsis-h"></i> และอีก ${category.ais.length - 5} AI
                </div>
            `;
        }
        
        card.innerHTML = `
            <div class="category-header">
                <div class="category-icon" style="background: ${color};">
                    <i class="${category.icon}"></i>
                </div>
                <div class="category-info">
                    <h3>${category.name}</h3>
                    <div class="category-count">${category.ais.length} AI</div>
                </div>
            </div>
            <p style="color: var(--dark-text-secondary); font-size: 14px; margin-bottom: 10px;">
                ${category.description}
            </p>
            <div class="ai-list">
                ${aiItemsHTML}
            </div>
        `;
        
        container.appendChild(card);
    });
}

function renderJSONView() {
    const container = document.getElementById('jsonView');
    if (!container) return;
    
    const jsonString = JSON.stringify(aiCategories, null, 2);
    
    // Simple syntax highlighting
    const highlighted = jsonString
        .replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g, function(match) {
            let cls = 'json-number';
            if (/^"/.test(match)) {
                if (/:$/.test(match)) {
                    cls = 'json-key';
                } else {
                    cls = 'json-string';
                }
            } else if (/true|false/.test(match)) {
                cls = 'json-boolean';
            } else if (/null/.test(match)) {
                cls = 'json-null';
            }
            return '<span class="' + cls + '">' + match + '</span>';
        });
    
    container.innerHTML = `<code>${highlighted}</code>`;
}

function loadJSONEditor() {
    const editor = document.getElementById('jsonEditor');
    if (!editor) return;
    
    editor.value = JSON.stringify(aiCategories, null, 2);
}

function loadAIData() {
    if (confirm('โหลดข้อมูล AI จากไฟล์ใหม่? การเปลี่ยนแปลงที่ยังไม่บันทึกจะหายไป')) {
        // Reload the page to get fresh data from ai-data.js
        location.reload();
    }
}

function saveAIData() {
    const editor = document.getElementById('jsonEditor');
    if (!editor) return;
    
    try {
        const newData = JSON.parse(editor.value);
        
        // Basic validation
        if (!Array.isArray(newData)) {
            throw new Error('ข้อมูลต้องเป็นอาร์เรย์');
        }
        
        if (confirm('บันทึกการเปลี่ยนแปลง? ข้อมูล AI จะถูกอัพเดต')) {
            // In a real implementation, you would save this to a file or server
            // For now, we'll just update the in-memory data and show a message
            alert('บันทึกสำเร็จ! (ในเวอร์ชันจริงจะบันทึกไปยังไฟล์ ai-data.js)');
            
            // Update the current data
            // Note: This only updates the current session, not the actual file
            // aiCategories = newData; // Uncomment if you want to update memory
            // calculateStats();
            // renderCategoriesPreview();
            
            console.log('New AI data:', newData);
        }
    } catch (error) {
        alert('รูปแบบ JSON ไม่ถูกต้อง: ' + error.message);
    }
}

// Initialize on load
document.addEventListener('DOMContentLoaded', function() {
    calculateStats();
    renderCategoriesPreview();
    renderJSONView();
    loadJSONEditor();
});

// Handle keyboard shortcuts
document.addEventListener('keydown', function(e) {
    if ((e.ctrlKey || e.metaKey) && e.key === 's') {
        e.preventDefault();
        if (currentTab === 'edit') {
            saveAIData();
        }
    }
});
</script>
</body>
</html>